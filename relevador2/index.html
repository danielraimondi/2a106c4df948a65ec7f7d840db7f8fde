
<!doctype html>


<html>
<head lang="en">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	
	<title>Relevando.com.uy</title> 
	<meta name="description" content="BlackTie.co - Free Handsome Bootstrap Themes" />	    
	<meta name="keywords" content="themes, bootstrap, free, templates, bootstrap 3, freebie,">
	<meta property="og:title" content="">

	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.css" type="text/css" media="screen">
    <link rel="stylesheet" href="css/font-awesome.min.css" rel="stylesheet">
	
	<link rel="stylesheet" type="text/css" href="css/style.css">	
	
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.10/css/jquery.dataTables.min.css" type="text/css" media="screen">
    
	<link rel="prefetch" href="images/zoom.png">
	
	 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 
    <!-- Bootstrap core CSS -->
    <!--<link href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/css/bootstrap.css" rel="stylesheet" media="screen">-->
 	

		<!-- SCRIPTS -->
	<script src="js/html5shiv.js"></script>
	<script src="js/jquery-1.10.2.min.js"></script>
	<script src="js/jquery-migrate-1.2.1.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.easing.1.3.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js"></script>
	<script async defer src="https://maps.googleapis.com/maps/api/js?v=3.exp&callback=initMap"></script>
	
	<script src="js/script.js"></script>
 
	<script>
	
	function sleep(milliseconds) {
	  var start = new Date().getTime();
	  for (var i = 0; i < 1e7; i++) {
	    if ((new Date().getTime() - start) > milliseconds){
	      break;
	    }
	  }
	}
	
	var map;

	$(document).ready(function(e) {
		
		
		
		var productos=[];
			
			$.ajax({
				url: "https://test-danielraimondi.c9.io/relevando/api/web/v1/route/clientes",
				type: 'GET',

				success: function(result) {
					

					var combo = document.getElementById('selectCliente'),
						temp = '',
						dataTemp;

					for (c in result){
						temp += "<option value='"+result[c].client_id+"'>"+result[c].client_name+"</option>";	
					}
					combo.innerHTML += temp;
					
				 },

				error: function (request, status, error) {
					alert("No se puede conectar con el servidor...");
				}
			});

            $.ajax({
                url: "https://test-danielraimondi.c9.io/relevando/api/web/v1/product/ver?_format=json",
                type: 'GET',
                
                success: function(result) {
                    
                    
                    var divTabla= document.getElementById('tablaPedidos'),
                    	temp = '',
                    	dataTemp;

                    temp +="<thead><tr><th>ID</th><th>Producto</th><th>Stock</th><th>Pedir</th></tr></thead><tbody>";
                    
                    for (var i=0, tam=result.data.length; i< tam; i++){
                    	dataTemp = result.data[i];
                    	productos.push(dataTemp[0]);
                    	temp += "<tr><td id='id"+dataTemp[0]+"'>"+dataTemp[0]+"</td><td>"+dataTemp[1]+"</td><td><input value=0 id='stock"+dataTemp[0]+"'></td><td><input value=0 id='order"+dataTemp[0]+"'></td></tr>";	
                    }
                    temp += "</tbody></form>";
                    divTabla.innerHTML = temp;
                }, 
                error: function (request, status, error) {
		        alert("No se puede conectar con el servidor...");
		    	}
            });

			$(formulario).on('submit', function(e) {
				
				var fechaCompleta = new Date();
				var	fecha = fechaCompleta.getFullYear()+'-'+(fechaCompleta.getMonth()+1)+'-'+fechaCompleta.getDate();
				var	idCliente = document.getElementById('selectCliente').value;
				console.log(productos);
				
				for (var p in productos){
                    	
            	       	$.ajax({
			                url: "https://test-danielraimondi.c9.io/relevando/api/web/v1/survey",
			                type: 'POST',
			                dataType: 'json',
			                data: {
			                	survey_date: fecha,
			                	client_id: idCliente,
			                	user_id: 15,  //harcodeado
			                	prod_id: (document.getElementById("id"+productos[p]).innerHTML),
			                	stock: (document.getElementById("stock"+productos[p]).value),
			                	order: (document.getElementById("order"+productos[p]).value)
			                },
			                
			                success: function(result) {
			                	console.log("OK");
			                }
			                
                    	}); //ajax
            	
                    	sleep(200);

				}; // for
			
			});


		
		$(".fancybox").fancybox({
			padding: 10,
			helpers: {
				overlay: {
					locked: false
				}
			}
		});
		
	
	    $('#tablajson').DataTable( {
	        "ajax": 'https://test-danielraimondi.c9.io/relevando/api/web/v1/product/ver?_format=json'
	    } );

	    $.ajax({
        url: "https://test-danielraimondi.c9.io/relevando/api/web/v1/route/clientes"}).then(function(data) {
       
       
	        console.log(JSON.stringify(data));

	           		

		     	for (c in data){       
        
        
		        var marker = new google.maps.Marker({
		            position: {lat: parseFloat(data[c].client_lat), lng: parseFloat(data[c].client_long)},
		            map: map

		        	});
	    		};  //for  

	   }); // callback   


	// console.log($(surveyForm).serialize());
	//   	$(surveyForm).on('submit', function(e) {
 //           // Prevent form submission
 //       	e.preventDefault();

 //           // Use Ajax to submit form data
 //           $.ajax({
 //               url: "https://test-danielraimondi.c9.io/relevando/api/web/v1/survey",
 //               type: 'POST',
 //               data: $(surveyForm).serialize(),
 //               success: function(result) {
 //                   alert("EXITO");
 //               },
 //               error: function (request, status, error) {
	// 	        alert(request.responseText);
	// 	    	}
 //           });
        
	// 		});
	      
	 
       
	
	})  // document.ready
	
		 function initMap() {
	     	var center = {lat: -34.893753, lng: -56.165217};
		  
		     map = new google.maps.Map(document.getElementById('map'), {
		     zoom: 13,
		     center: center,
		     mapTypeId: google.maps.MapTypeId.TERRAIN
		     });
	    
	  	 	}; //initMap  

	
	 </script>
	


</head>

<body>
	<div class="navbar navbar-fixed-top" data-activeslide="1">
		<div class="container">
		
			<!-- .navbar-toggle is used as the toggle for collapsed navbar content -->
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			
			<div class="nav-collapse collapse navbar-responsive-collapse">
				<ul class="nav row">
					<li data-slide="1" class="col-12 col-sm-2"><a id="menu-link-1" href="#slide-1" title="Next Section"><span class="icon icon-home"></span> <span class="text">INICIO</span></a></li>
					<li data-slide="2" class="col-12 col-sm-2"><a id="menu-link-2" href="#slide-2" title="Next Section"><span class="icon icon-map-marker"></span> <span class="text">RUTAS</span></a></li>
					
					<li data-slide="4" class="col-12 col-sm-2"><a id="menu-link-4" href="#slide-4" title="Next Section"><span class="icon icon-barcode"></span> <span class="text">PEDIDOS</span></a></li>
					<li data-slide="5" class="col-12 col-sm-2"><a id="menu-link-4" href="#slide-4" title="Next Section"><span class="icon icon-signal"></span> <span class="text">ESTADO</span></a></li>
					
				</ul>
				<div class="row">
					<div class="col-sm-2 active-menu"></div>
				</div>
			</div><!-- /.nav-collapse -->
		</div><!-- /.container -->
	</div><!-- /.navbar -->
	
	
	<!-- === Arrows === -->
	<div id="arrows">
		<!--<div id="arrow-up" class="disabled"></div>-->
		<!--<div id="arrow-down"></div>-->
		<!--<div id="arrow-left" class="disabled visible-lg"></div>-->
		<!--<div id="arrow-right" class="disabled visible-lg"></div>-->
	</div><!-- /.arrows -->
	
	
	<!-- === MAIN Background === -->
	<div class="slide story" id="slide-1" data-slide="1">
		<div class="container">
			<div id="home-row-1" class="row clearfix">
				<div class="col-12">
					<h1 class="font-semibold">Relevando.com.uy </h1>
					<h4 class="font-thin">Bienvenido a nuestra aplicación RELEVANDO.COM.UY <a class="font-semibold" href="#">acceso a usuarios</a> </h4>
					<br>
					<br>
				</div><!-- /col-12 -->
			</div><!-- /row -->
			<div id="home-row-2" class="row clearfix">
				<div class="col-12 col-sm-3"><div class="home-hover navigation-slide" data-slide="2"><img src="images/s01.png"></div><span>RUTAS</span></div>
				
				<div class="col-12 col-sm-3"><div class="home-hover navigation-slide" data-slide="4"><img src="images/s03.png"></div><span>RELEVAMIENTOS</span></div>
				<div class="col-12 col-sm-3"><div class="home-hover navigation-slide" data-slide="5"><img src="images/s04.png"></div><span>ESTADO</span></div>
			</div><!-- /row -->
		</div><!-- /container -->
	</div><!-- /slide1 -->
	
	<!-- === Slide 2  rutas=== -->
	<div class="slide story" id="slide-2" data-slide="2">
		<div class="container">
			<div class="row title-row">
				<div class="col-12 font-thin">Mis Rutas</div>
			</div><!-- /row -->
			<div class="row line-row">
				<div class="hr">&nbsp;</div>
			</div><!-- /row -->
			<div align="center">
				<div class="client-map">
					<div id="map" style="height:800px; width:100%;"></div>
				</div>
			</div><!-- /row -->
		</div><!-- /container -->
	</div><!-- /slide2 -->
	
	
	
	<!-- === Slide 4 - pedido === -->
	<div class="slide story" id="slide-4" data-slide="4">
		<div class="container">
			
				<div class="col-12 font-thin">Realizar pedido</div>
			
			
			
			
				
				<div class="panel panel-default">
					<h2 class="form-signin-heading">Pedidos</h2><br><br>
					
					<div id='tabla'>
						<form id='formulario'>
							<label for='selectCliente'>Cliente:</label>
							<select id="selectCliente"></select>
							<table id='tablaPedidos' class='' cellspacing='0' width='50%'></table>
							<input type="submit" name="submit"/>
						</form>
					</div>
				 <!--	<form class="form-signin" id="surveyForm">-->
					<!--  <h2 class="form-signin-heading">Realizar Pedido</h2>-->
					<!--  <input class="form-control" type="text" required name="survey_date" placeholder="survey_date" />-->
					<!--  <input class="form-control" type="text" required name="client_id" placeholder="client_id" />-->
					<!--  <input class="form-control" type="text" required name="user_id" placeholder="user_id" />-->
					<!--  <input class="form-control" type="text" required name="prod_id" placeholder="prod_id" />-->
					<!--  <input class="form-control" type="text" required name="stock" placeholder="stock" />-->
					<!--  <input class="form-control" type="text" required name="order" placeholder="order" />-->
					<!--  <input name="submit" type="submit" />-->
					<!--</form>-->
					
					<!--<button type="button" class="btn btn-lg btn-primary btn-block" onclick="window.open('index2.html', 'ventana nueva', 'height=442, width=231 left=100, top=100')">Ingrese Pedidos</button>-->
					
				</div>
			
		</div><!-- /container -->
	</div><!-- /slide4 -->
	
	<!-- === Slide 5 / ESTADO === -->
	<div class="slide story" id="slide-5" data-slide="5">
		<div class="container">
			<div class="row title-row">
				<div class="col-12 font-light">Estado de cumplimiento</div>
			</div><!-- /row -->
			<div class="row content-row">
				<div class="row subtitle-row">
					<div class="col-12 font-light">Total cumplido del <span class="font-semibold">negocio</span></div>
				</div><!-- /row -->
				<div class="progress">
				  <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
					<span class="sr-only">40% Complete (success)</span>
				  </div>
				</div>
				<div class="row subtitle-row">
					<div class="col-12 font-light">Total cumplido del <span class="font-semibold">día</span></div>
				</div><!-- /row -->
				<div class="progress">
				  <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
					<span class="sr-only">20% Complete</span>
				  </div>
				</div>
				<div class="row subtitle-row">
					<div class="col-12 font-light">Total cumplido del <span class="font-semibold">mes</span></div>
				</div><!-- /row -->
				<div class="progress">
				  <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
					<span class="sr-only">45% Complete</span>
				  </div>
				</div>
			</div><!-- /row -->
		</div><!-- /container -->
	</div><!-- /Slide 5 -->
	

	
</body>



</html>